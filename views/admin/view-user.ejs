<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/style.css">
    </head>
<body>
  <nav class="navbar navbar-expand-sm mb-0 rounded-top  ">
    <div class="container-fluid" style="background-color: red;">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
            <span class="fas fa-bars" style="color:white"></span>
          </button>
          <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="nav-bar nav mx-auto">
            <button  data-bs-toggle="modal" data-bs-target="#exampleModal">Register</button>
            <li class="nav-item "><a  class="nav-link" href="/" style="color: white;">Home</a></li>
            <li class="nav-item "><a  class="nav-link" href="/login" style="color:white;">Sign in</a></li>

        </ul>
          </div>
    </div>
</nav> 
<div>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>S/N</th>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th colspan="2"></th>
            </tr>
        </thead>
        <tbody>
           
        </tbody>
    </table>
</div>
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Available Products</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
        <div className='container-fluid'>
            <div class="formal">
                <form id="formal">
                 
                  <h2 class="text-center">Register Now</h2>
                    <label for="">Name</label>
                    <input type="text" name="name" class="form-control rounded-pill my-1" id="names">
                    
                              <small class="text-danger" id="nameErr"></small><br>
                    
                    <label for="">Phone</label>
                    <input type="num" name="phone" class="form-control rounded-pill my-1" id="phones">
                   
                        <small class="text-danger" id="phoneErr"></small><br>
               
            
                    <label for="">Email</label>
                    <input type="text" name="email" class="form-control rounded-pill my-1" id="emails">
                 
                        <small class="text-danger" id="emailErr"></small><br>
                  
            
                    <label for="">Password</label>
                    <input type="password" name="password" class="form-control rounded-pill my-1" id="passwords">
                   
                        <small class="text-danger" id="passErr"></small><br>
                
            
                    <button type="submit" class="btn text-danger"  style="width: 100%;">Register!</button>
                </form>
              </div>
        </div>
        </div>
      </div>
    </div>
  </div>
 

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>
let form = document.getElementById('formal')
form.addEventListener('submit',submitMe)
function submitMe(e){
    e.preventDefault();
    let names = document.getElementById('names').value
    let emails = document.getElementById('emails').value
    let phones = document.getElementById('phones').value
    let pass = document.getElementById('passwords').value
    const alldata = {
        name:names,
        email:emails,
        phone:phones,
        password:pass
    }
    if(names.trim() == "" || names.trim==null){
        document.getElementById('nameErr').innerHTML = "name is required"
    }
    if(emails.trim() == "" || emails.trim==null){
        document.getElementById('emailErr').innerHTML = "email is required"
    }else if(!(emails.endsWith('@yahoo.com')||emails.endsWith("@gmail.com"))){
        document.getElementById('emailErr').innerHTML = "invalid email address"
    }
    if(phones.trim() == "" || phones.trim==null){
        document.getElementById('phoneErr').innerHTML = "phone number is required"
    } else if(!(phones.startsWith('090')||phones.startsWith('080')||phones.startsWith('070')||phones.startsWith('091')||phones.startsWith('081'))||phones.length !== 11){
        document.getElementById('phoneErr').innerHTML = "Invalid phone number"
    }
    if(pass.trim() == "" || pass.trim==null){
        document.getElementById('passErr').innerHTML = "password is required"
    }else if(pass.length <8){
        document.getElementById('passErr').innerHTML = "password must be greater than 8 character"
    
    }else{
        axios.post('/add-user',alldata).then(response=>{
           console.log(response)
           
        })
    }
}

</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>

</body>
</html>